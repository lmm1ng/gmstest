{"version":3,"sources":["reducers/table.js","reducers/pagination.js","reducers/index.js","store.js","actions/table.js","selectors/getSortedData.js","components/Table/Table.jsx","utils/isArrayValidForTable.js","containers/Table.js","selectors/getMaxPage.js","components/Pagination/Pagination.jsx","containers/Pagination.js","actions/pagination.js","index.js"],"names":["initialState","data","order","column","page","maxRowsOnPage","combineReducers","table","state","action","type","payload","pagination","store","applyMiddleware","save","states","thunk","logger","createStore","createStoreWithMiddleware","rootReducer","load","preloadedState","setData","array","getSortedData","createSelector","R","TableComp","this","props","setDataAsync","length","hash","object","Object","keys","forEach","key","Set","values","size","isArrayValidForTable","Table","celled","fixed","id","Header","Row","map","header","HeaderCell","onClick","e","setSort","target","Body","slice","row","i","cell","Cell","Dimmer","active","Loader","Component","connect","dispatch","getState","a","axios","get","then","response","catch","err","console","log","sortedData","getMaxPage","dataLength","Math","ceil","PaginationComp","maxPage","setPage","Pagination","defaultActivePage","totalPages","onPageChange","activePage","number","ReactDOM","render","document","getElementById"],"mappings":"kSAAMA,EAAe,CACnBC,KAAM,GACNC,MAAO,GACPC,OAAQ,ICHJH,EAAe,CACnBI,KAAM,EACNC,cAAe,ICEFC,cAAgB,CAAEC,MFElB,WAAmC,IAAlCC,EAAiC,uDAAzBR,EAAcS,EAAW,uCAC/C,OAAQA,EAAOC,MACb,IAAK,WACH,OAAO,eACFF,EADL,CAEEP,KAAMQ,EAAOE,UAEjB,IAAK,WACH,OAAOH,EAAML,SAAWM,EAAOE,QAAxB,eACEH,EADF,CACSL,OAAQM,EAAOE,QAAST,MAAO,QAC3B,QAAhBM,EAAMN,MAAN,eACKM,EADL,CACYN,MAAO,SADnB,eAEKM,EAFL,CAEYN,MAAO,QAEzB,QACE,OAAOM,IEjB2BI,WDCzB,WAAmC,IAAlCJ,EAAiC,uDAAzBR,EAAcS,EAAW,uCAC/C,OAAQA,EAAOC,MACb,IAAK,WACH,OAAO,eACFF,EADL,CAEEJ,KAAMK,EAAOE,UAGjB,QACE,OAAOH,M,SEFAK,EANqBC,YAChCC,eAAK,CAAEC,OAAQ,CAAC,eAAgB,iBAChCC,IACAC,IAHgCJ,CAIhCK,IAEmBC,CACnBC,EACAC,eAAK,CACHN,OAAQ,CAAC,eAAgB,eACzBO,eAAgB,CAAEhB,MAAO,CAAEN,KAAM,Q,mDCdxBuB,EAAU,SAAAC,GAAK,MAAK,CAC/Bf,KAAM,WACNC,QAASc,I,8DCGEC,EAAgBC,YAC3B,CALc,SAAAnB,GAAK,OAAIA,EAAMD,MAAMN,MACpB,SAAAO,GAAK,OAAIA,EAAMD,MAAML,OACpB,SAAAM,GAAK,OAAIA,EAAMD,MAAMJ,UAIrC,SAACF,EAAMC,EAAOC,GACZ,OAAIA,GAAUD,EACK,QAAVA,EACH0B,IAAOA,IAASA,IAAUA,IAAWA,IAAOzB,KAAWF,GACvD2B,IAAOA,IAAUA,IAAUA,IAAWA,IAAOzB,KAAWF,GAEvDA,K,wECRU4B,G,mMAEjBC,KAAKC,MAAMC,iB,+BAaH,IAAD,OACP,OAAOF,KAAKC,MAAM9B,KAAKgC,OCvBS,SAAAR,GAClC,IAAMS,EAAO,GAD8B,uBAE3C,YAAmBT,EAAnB,+CAA0B,CAAC,IAAlBU,EAAiB,QACxBC,OAAOC,KAAKF,GAAQG,SAAQ,SAAAC,GAAG,OAC7BL,EAAKK,GAAOL,EAAKK,KAAUL,EAAKK,GAAO,MAJA,kFAO3C,OAA6C,IAAtC,IAAIC,IAAIJ,OAAOK,OAAOP,IAAOQ,KDiBhCC,CAAqBb,KAAKC,MAAM9B,MAC9B,kBAAC2C,EAAA,EAAD,CAAOC,QAAM,EAACC,OAAK,EAACC,GAAG,SACrB,kBAACH,EAAA,EAAMI,OAAP,KACE,kBAACJ,EAAA,EAAMK,IAAP,KACGb,OAAOC,KAAKP,KAAKC,MAAM9B,KAAK,IAAIiD,KAAI,SAAAC,GAAM,OACzC,kBAACP,EAAA,EAAMQ,WAAP,CACEb,IAAKY,EACLJ,GAAII,EACJE,QAAS,SAAAC,GAAC,OAAI,EAAKvB,MAAMwB,QAAQD,EAAEE,OAAOT,MAH5C,UAKMI,EALN,YAMI,EAAKpB,MAAM7B,OAAS,EAAK6B,MAAM5B,SAAWgD,EACjB,QAArB,EAAKpB,MAAM7B,MACT,SACA,SACF,UAMd,kBAAC0C,EAAA,EAAMa,KAAP,KACG3B,KAAKC,MAAM9B,KACTyD,MACC5B,KAAKC,MAAM1B,eAAiByB,KAAKC,MAAM3B,KAAO,GAC9C0B,KAAKC,MAAM1B,cACTyB,KAAKC,MAAM1B,eAAiByB,KAAKC,MAAM3B,KAAO,IAGjD8C,KAAI,SAACS,EAAKC,GAAN,OACH,kBAAChB,EAAA,EAAMK,IAAP,CAAWV,IAAKoB,EAAMC,GACnBxB,OAAOC,KAAK,EAAKN,MAAM9B,KAAK,IAAIiD,KAAI,SAAAW,GAAI,OACvC,kBAACjB,EAAA,EAAMkB,KAAP,CAAYvB,IAAKoB,EAAIE,IAAQF,EAAIE,aAO7C,qLAGF,kBAACE,EAAA,EAAD,CAAQ3D,MAAI,EAAC4D,QAAM,GACjB,kBAACC,EAAA,EAAD,W,GA5D+BC,cEFxBC,eACb,SAAA3D,GAAK,MAAK,CACRP,KAAMO,EAAMD,MAAMN,KAClBC,MAAOM,EAAMD,MAAML,MACnBC,OAAQK,EAAMD,MAAMJ,OACpBC,KAAMI,EAAMI,WAAWR,KACvBC,cAAeG,EAAMI,WAAWP,iBAElC,CACE2B,aAAc,yDAAM,WAAOoC,EAAUC,GAAjB,iBAAAC,EAAA,sEACZF,EJFV,uCAAO,WAAMA,GAAN,SAAAE,EAAA,sEACCC,IACHC,IACC,mFAEDC,MAAK,SAAAC,GAAQ,OAAIN,EAAS5C,EAAQkD,EAASzE,UAC3C0E,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MANvB,2CAAP,mDAAM,IICgB,OAEZpE,EAAQ6D,IACRU,EAAarD,EAAclB,GACjC4D,EAAS5C,EAAQuD,IAJC,2CAAN,yDAMdxB,QAAS,SAAApD,GAAM,OAAI,SAACiE,EAAUC,GAC5BD,EJd4B,CAChC1D,KAAM,WACNC,QIYqBR,IACjB,IAAMK,EAAQ6D,IACRU,EAAarD,EAAclB,GACjC4D,EAAS5C,EAAQuD,OAnBRZ,CAsBbtC,GCtBWmD,EAAarD,YACxB,CAJoB,SAAAnB,GAAK,OAAIA,EAAMD,MAAMN,KAAKgC,QACvB,SAAAzB,GAAK,OAAIA,EAAMI,WAAWP,iBAIjD,SAAC4E,EAAY5E,GAAb,OACE4E,EAAaC,KAAKC,KAAKF,EAAa5E,GAAiB,K,SCa1C+E,G,OAfQ,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,QAAZ,OACrBD,EACE,kBAACE,EAAA,EAAD,CACExC,GAAG,aACHyC,kBAAmB,EACnBC,WAAYJ,EACZK,aAAc,SAACpC,EAAGrD,GAAJ,OAAaqF,EAAQrF,EAAK0F,eAExC,OCTSxB,eACb,SAAA3D,GAAK,MAAK,CACR6E,QAASL,EAAWxE,MAEtB,CAAE8E,QCTmB,SAAAM,GAAM,MAAK,CAChClF,KAAM,WACNC,QAASiF,KDGIzB,CAKbiB,G,cEAFS,IAASC,OACP,kBAAC,IAAD,CAAUjF,MAAOA,GACf,kBAAC,EAAD,MACA,kBAAC,EAAD,OAEFkF,SAASC,eAAe,W","file":"static/js/main.f7286013.chunk.js","sourcesContent":["const initialState = {\n  data: [],\n  order: \"\",\n  column: \"\"\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_DATA\":\n      return {\n        ...state,\n        data: action.payload\n      };\n    case \"SET_SORT\":\n      return state.column !== action.payload\n        ? { ...state, column: action.payload, order: \"asc\" }\n        : state.order === \"asc\"\n        ? { ...state, order: \"desc\" }\n        : { ...state, order: \"asc\" };\n\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  page: 1,\n  maxRowsOnPage: 16\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_PAGE\":\n      return {\n        ...state,\n        page: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport table from \"./table\";\nimport pagination from \"./pagination\";\n\nexport default combineReducers({ table, pagination });\n","import { createStore, applyMiddleware } from \"redux\";\nimport { save, load } from \"redux-localstorage-simple\";\nimport logger from \"redux-logger\";\nimport rootReducer from \"./reducers\";\nimport thunk from \"redux-thunk\";\n\nconst createStoreWithMiddleware = applyMiddleware(\n  save({ states: [\"table.column\", \"table.order\"] }),\n  thunk,\n  logger\n)(createStore);\n\nexport const store = createStoreWithMiddleware(\n  rootReducer,\n  load({\n    states: [\"table.column\", \"table.order\"],\n    preloadedState: { table: { data: [] } }\n  })\n);\n","import axios from \"axios\";\n\nexport const setData = array => ({\n  type: \"SET_DATA\",\n  payload: array\n});\n\nexport const setSort = string => ({\n  type: \"SET_SORT\",\n  payload: string\n});\n\nexport const setDataAsync = () => {\n  return async dispatch => {\n    await axios\n      .get(\n        \"https://raw.githubusercontent.com/blmzv/ah-frontend-intern/master/profiles.json\"\n      )\n      .then(response => dispatch(setData(response.data)))\n      .catch(err => console.log(err));\n  };\n};\n","import { createSelector } from \"reselect\";\nimport * as R from \"ramda\";\n\nconst getData = state => state.table.data;\nconst getOrder = state => state.table.order;\nconst getColumn = state => state.table.column;\n\nexport const getSortedData = createSelector(\n  [getData, getOrder, getColumn],\n  (data, order, column) => {\n    if (column && order) {\n      return order === \"asc\"\n        ? R.sort(R.ascend(R.compose(R.toLower, R.prop(column))), data)\n        : R.sort(R.descend(R.compose(R.toLower, R.prop(column))), data)\n    }\n    return data;\n  }\n);\n","import React, { Component } from \"react\";\nimport { Table, Dimmer, Loader } from \"semantic-ui-react\";\nimport { isArrayValidForTable } from \"../../utils/isArrayValidForTable\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.css\";\n\nexport default class TableComp extends Component {\n  componentDidMount() {\n    this.props.setDataAsync();\n  }\n\n  static propTypes = {\n    data: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string)).isRequired,\n    order: PropTypes.oneOf([\"asc\", \"desc\"]).isRequired,\n    column: PropTypes.string.isRequired,\n    page: PropTypes.number.isRequired,\n    maxRowsOnPage: PropTypes.number.isRequired,\n    setDataAsync: PropTypes.func.isRequired,\n    setSort: PropTypes.func.isRequired\n  };\n\n  render() {\n    return this.props.data.length ? (\n      isArrayValidForTable(this.props.data) ? (\n        <Table celled fixed id=\"table\">\n          <Table.Header>\n            <Table.Row>\n              {Object.keys(this.props.data[0]).map(header => (\n                <Table.HeaderCell\n                  key={header}\n                  id={header}\n                  onClick={e => this.props.setSort(e.target.id)}\n                >\n                  {`${header} ${\n                    this.props.order && this.props.column === header\n                      ? this.props.order === \"asc\"\n                        ? \"▼\"\n                        : \"▲\"\n                      : \"\"\n                  }`}\n                </Table.HeaderCell>\n              ))}\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {this.props.data\n              .slice(\n                this.props.maxRowsOnPage * (this.props.page - 1),\n                this.props.maxRowsOnPage +\n                  this.props.maxRowsOnPage * (this.props.page - 1)\n              )\n\n              .map((row, i) => (\n                <Table.Row key={row + i}>\n                  {Object.keys(this.props.data[0]).map(cell => (\n                    <Table.Cell key={row[cell]}>{row[cell]}</Table.Cell>\n                  ))}\n                </Table.Row>\n              ))}\n          </Table.Body>\n        </Table>\n      ) : (\n        <div>Загружаемый файл не валиден!</div>\n      )\n    ) : (\n      <Dimmer page active>\n        <Loader />\n      </Dimmer>\n    );\n  }\n}\n","export const isArrayValidForTable = array => {\n  const hash = {};\n  for (let object of array) {\n    Object.keys(object).forEach(key =>\n      hash[key] ? hash[key]++ : (hash[key] = 1)\n    );\n  }\n  return new Set(Object.values(hash)).size === 1;\n};\n","import { connect } from \"react-redux\";\nimport { setDataAsync, setSort, setData } from \"../actions/table\";\nimport { getSortedData } from \"../selectors/getSortedData\";\nimport TableComp from \"../components/Table/Table\";\n\nexport default connect(\n  state => ({\n    data: state.table.data,\n    order: state.table.order,\n    column: state.table.column,\n    page: state.pagination.page,\n    maxRowsOnPage: state.pagination.maxRowsOnPage\n  }),\n  {\n    setDataAsync: () => async (dispatch, getState) => {\n      await dispatch(setDataAsync());\n      const state = getState();\n      const sortedData = getSortedData(state);\n      dispatch(setData(sortedData));\n    },\n    setSort: column => (dispatch, getState) => {\n      dispatch(setSort(column));\n      const state = getState();\n      const sortedData = getSortedData(state);\n      dispatch(setData(sortedData));\n    }\n  }\n)(TableComp);\n","import { createSelector } from \"reselect\";\n\nconst getDataLength = state => state.table.data.length;\nconst getMaxRowsOnPage = state => state.pagination.maxRowsOnPage;\n\nexport const getMaxPage = createSelector(\n  [getDataLength, getMaxRowsOnPage],\n  (dataLength, maxRowsOnPage) =>\n    dataLength ? Math.ceil(dataLength / maxRowsOnPage) : 0\n);\n","import React from \"react\";\nimport { Pagination } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.css\";\n\nconst PaginationComp = ({ maxPage, setPage }) =>\n  maxPage ? (\n    <Pagination\n      id=\"pagination\"\n      defaultActivePage={1}\n      totalPages={maxPage}\n      onPageChange={(e, data) => setPage(data.activePage)}\n    />\n  ) : null;\n\nPaginationComp.propTypes = {\n  maxPage: PropTypes.number.isRequired,\n  setPage: PropTypes.func.isRequired\n};\n\nexport default PaginationComp;\n","import { connect } from \"react-redux\";\nimport { setPage } from \"../actions/pagination\";\nimport { getMaxPage } from \"../selectors/getMaxPage\";\nimport PaginationComp from \"../components/Pagination/Pagination\";\n\nexport default connect(\n  state => ({\n    maxPage: getMaxPage(state)\n  }),\n  { setPage }\n)(PaginationComp);\n","export const setPage = number => ({\n  type: \"SET_PAGE\",\n  payload: number\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { store } from \"./store\";\nimport { Provider } from \"react-redux\";\nimport Table from \"./containers/Table\";\nimport Pagination from \"./containers/Pagination\";\n\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"./index.css\"\n\nReactDOM.render(\n  <Provider store={store}>\n    <Table />\n    <Pagination />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}